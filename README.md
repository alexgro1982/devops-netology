# Домашнее задание к занятию "6.6. Troubleshooting"

## Задача 1

Для прерывания запроса в MongoDB необходимо выполнить следующие действия:
1. Определить opid с помошью запроса db.currentOp()
2. С помощью db.killOp(<opid>) завершить зависший запрос.

Для исключения ситуаций с зависшими запросами можно дополнить потенциально долгие запросы параметром maxTimeMS() с указанием максимального времени выполнения.


## Задача 2

Redis хранит данные в оперативной памяти. Из условий задачи видно, что количество записываемых пар ключ-значение больше чем истёкших. Следовательно, через какое-то время занятая память достигнет значения, указанного в параметре maxmemory. В таком случае Redis начнёт действовать согласно установленной политики вытеснения (в нашем случае "noeviction").

## Задача 3

Так как таблицы в базе данных MySQL стали большими, то скорее всего разрыв соединения проимходит по таймауту.

1. Можно попробовать изменить параметры сервера net_read_timeout или connect_timeout.
2. Необходимо разделить большие таблицы на разные сервера (Горизонтальный шардинг)

## Задача 4

Сообщение "postmaster invoked oom-killer"  говорит о том, что процесс postmaster был убит компонентом ядра Out-of-Memory Killer. Таким образом ядро борется с недостатком памяти.  
Причиной нехватки памяти может быть как сам PostgreSQL так и другое приложение, выполняющееся на этом же сервере.

1. Необходимо проверить настройки использования памяти PostgreSQL в файле postgresql.conf
2. Можно установить параметр ядра oom_score_adj в отрицательное значение, чтобы понизить шансы на завершение процесса postmaster.
 

